###  

- 数据获取阶段

1. 首先要给数据集打标签 根据字段due_days 逾期天数来打,逾期天数小于3标为好用户0, 3~30天标为灰度用户,大于30天标记为坏用户,用1表示.
due_days为是根据用户在表现期里面的表现来统计出来的.首先表现期是根据vintage分析来确定表现期的长短.一般是6个月到1年.观察期一般是1年到3年.因为我们要预测用户在未来几个月的是否会逾期的概率,比如今天11月1号,我要用模型来预测这个用户在未来几个月的表现情况,那么申请日往前推6个月,也就是4月到10月就是表现前,然后在4月份往前推一年,17年4月到18年4月为观察其,那么我们就要用这个时间段内的客户,作为训练数据,观察他们在表现期4月到10月逾期情况给他们打标签.

- EDA
接来下就是探索性分析的时候,分析每个字段的缺失值,异常值,中位数,平均值,最大最小值等.一般对于缺失值,如果这个字段的缺失率很高,比如超过了一半以上,那么我会把它drop掉,剩下的根据具体的字段填充不同的值或者当做一种状态让模型自己学习.异常值的话,我会画箱线图来看,然后根据实际情况过滤掉那些异常的样本.然后我会检测单一值,如果某个字段取值是一样的,或者这个字段的方差很小,那么这些字段我也会drop掉. 然后就是数据中一些ID,身份证,等对我们分类没有帮助的字段,我也会drop掉.

- 变量分箱
因为最后我们是要将违约概率转化成分数的形式,所以我们要对每个字段分箱.分箱也就是离散化特征,一般无监督的有等宽,等频,聚类.有监督的主要是卡方分箱. 最后用到了等频和卡方分箱.卡方分箱的原理就是相邻两个区间如果有类似的类分布,那么就合并他们,否则就保持独立.

	因为我们规定了每一个字段的箱子数不能超过5个.所以在分箱过程中,对于字段可能取值少于5个的,那么就不分箱.对于离散特征,bad_rate编码,作为连续值处理.对于连续值取值可能过多的,先等频分箱,映射为切分点.然后进行卡方分箱,
	具体的是计算两两区间的卡方值.将卡方值最小的两个区间合并. ,分箱后还有一些处理.
	
	
